
module.exports = (webpackConfig, env) => {
  // FilenameHash
  webpackConfig.output.chunkFilename = '[name].[hash].js'; // http://webpack.github.io/docs/configuration.html#output-chunkfilename
  const e = env.version;
  // ClassnameHash
  const cssLoaderOption = {
    importLoaders: 1,
    modules: true,
    localIdentName: '[hash:base64:5]',
  };
  const cssLoaders = webpackConfig.module.loaders[3].loader.split('!');
  webpackConfig.module.loaders[3].loader = cssLoaders.map(item => {
    if (item.startsWith('css')) {
      return `css?${JSON.stringify(cssLoaderOption)}`
    }
    return item
  }).join('!');

  // PreLoaders
  // webpackConfig.module.preLoaders = [{
  //   test: /\.js$/,
  //   enforce: 'pre',
  //   loader: 'eslint',
  // }]
  webpackConfig.module.loaders.push({
    test: /node_modules\/plotly\.js/,
    loader: 'ify',
    enforce: 'post'
  });

  return webpackConfig
};
